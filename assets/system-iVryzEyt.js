import{_ as p,S as y,i as h,M as b}from"./3d-force-graph-CFjuoTfL.js";import{P as f}from"./paths-D9vQSSmD.js";const g={contractsPath:f.DATA_ROOT,defaultRoute:"demo/visitor.demo.route.json",defaultGraphUrl:f.UNIVERSE_JSON};let o=null,u=null,n=!1,v=.001,c=!0;document.addEventListener("DOMContentLoaded",async()=>{try{await k(),await w("system"),G(),P()}catch(e){console.error("Failed to initialize system graph:",e)}});async function w(e="system"){try{const a=await(await fetch(g.defaultGraphUrl)).json(),r=a.nodes.filter(t=>t.system&&t.system.visibility!=="hidden"),m=a.edges.filter(t=>{const l=a.nodes.find(i=>i.id===t.source),d=a.nodes.find(i=>i.id===t.target);return l?.system&&d?.system&&l.system.visibility!=="hidden"&&d.system.visibility!=="hidden"});u={nodes:r.map(t=>({...t,color:z(t),size:N(t)})),links:m.map(t=>({...t,color:"#666"}))},o&&o.graphData(u)}catch(s){console.error("Failed to load graph data:",s)}}function k(){const e=document.getElementById("app");o=p()(e).graphData({nodes:[],links:[]}).nodeLabel("label").nodeAutoColorBy("type").nodeThreeObject(s=>{const a=new y(s.size||1),r=new h({color:s.color||"#fff",emissive:s.color||"#fff",emissiveIntensity:.2});return new b(a,r)}).linkWidth(1).linkColor(()=>"#666").backgroundColor("#0a0a0c").showNavInfo(!1).cameraPosition({z:500}),o.controls().autoRotate=c,o.controls().autoRotateSpeed=v}function z(e){return{root:"#ff6b6b",hub:"#4ecdc4",domain:"#45b7d1",concept:"#96ceb4",module:"#feca57",spec:"#ff9ff3",process:"#54a0ff",policy:"#5f27cd",artifact:"#00d2d3",practice:"#ff6348",workbench:"#30336b"}[e.type]||"#fff"}function N(e){return{root:3,hub:2.5,domain:2,concept:1.5,module:1.2,spec:1,process:1.2,policy:1,artifact:.8,practice:1,workbench:1}[e.type]||1}function G(){document.addEventListener("keydown",e=>{switch(e.key){case" ":e.preventDefault(),S();break;case"r":C();break}})}function P(){function e(){!n&&c&&o&&o.controls().update(),requestAnimationFrame(e)}e()}function S(){n=!n,o&&(o.controls().autoRotate=!n&&c)}function C(){o&&o.cameraPosition({z:500})}
