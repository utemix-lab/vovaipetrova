# Track 6: Expressive Stacks

**Дата создания:** 19 февраля 2026
**Статус:** Активен

---

## Назначение

Track 6 отвечает за:
- Поиск выразительных средств для визуализации графов
- Соответствие стеков типам графов
- Метафорические обёртки логики представления
- Унификацию инструментов поверх разных проекций

---

## Ключевые принципы

### 1. Разделение сцены и панелей

```
┌─────────────────────────────────────────────────────┐
│                    MAIN SCENE                        │
│         (сменяемые визуальные стеки)                │
│                                                      │
│   3D-граф навигации │ VST-проекция │ Music-граф    │
│                                                      │
├─────────────────────────────────────────────────────┤
│  PANELS (унифицированные инструменты)               │
│  ┌─────────┐ ┌─────────┐ ┌─────────┐               │
│  │ Story   │ │ System  │ │ Filters │               │
│  │ (пусто) │ │ (пусто) │ │ (флаги) │               │
│  └─────────┘ └─────────┘ └─────────┘               │
└─────────────────────────────────────────────────────┘
```

### 2. Сцена уступает место

- Основной 3D-граф — навигационная модель Мира
- При переходе к внутреннему графу — сцена меняет стек
- Один стек активен в момент времени (не перегружать браузер)

### 3. Унифицированные инструменты

Некоторые виджеты работают с любым графом:
- **Флаги стран** — фильтрация по географии
- **Поиск** — текстовый поиск по узлам
- **Breadcrumbs** — путь навигации
- **Info Card** — детали выбранного узла

---

## Архитектура представления

```
Данные
  ↓
Графовая модель (структура)
  ↓
Режим когнитивной задачи (что пользователь хочет сделать)
  ↓
Проекция (логика отображения)
  ↓
Метафора (ассоциативная механика)
  ↓
Стек (техническая реализация)
```

### Режим когнитивной задачи

**Ключевое понятие:** Разные задачи требуют разных проекций.

Стек привязывается не к графу напрямую, а к **задаче пользователя**.

| Задача | Проекция | Стек |
|--------|----------|------|
| **Найти** (поиск по критериям) | Faceted Explorer | React UI |
| **Понять структуру** (обзор каталога) | Matrix / Treemap | D3.js |
| **Сравнить** (2-3 объекта) | Radar / Compare View | D3.js / Chart.js |
| **Исследовать связи** (концептуальный анализ) | Ego Graph | force-graph |
| **Показать философию** (демонстрация системы) | Morph Mode | Three.js |

**Принцип:** Если привязать стек к задаче — избегаем эстетического хаоса.

---

## Типы графов и их проекции

### Зафиксированные решения

| Граф | Тип | Проекция | Метафора | Стек |
|------|-----|----------|----------|------|
| **Universe** | Навигационный | 3D force-graph | Космос/Созвездия | Three.js + 3d-force-graph |
| **VSTablishment** | Фасетная онтология (A) | TBD | TBD | TBD |
| **Music General** | Граф влияний (B) | TBD | TBD | TBD |
| **Zucken-Drücken** | Концептуальный гиперграф (C) | TBD | TBD | TBD |

### Universe (3D-граф)

**Статус:** ✅ Реализован

**Решение:**
- Это НЕ проекция графа системы
- Это навигационная модель Мира
- Связи между узлами не выражены визуально
- Узлы — точки входа в подсистемы

---

## VSTablishment: Поиск проекции

### Характеристики графа

- **Тип:** A (Фасетная онтология)
- **Центр:** VSTPlugin
- **Измерения:** Mechanism, Genre, Character, Mood, Articulation, Company
- **Особенность:** Мульти-мерная классификация, не иерархия

### Кандидаты проекций

#### 1. Faceted Explorer (прагматичный)

```
┌─────────────────────────────────────────────────────┐
│ [Filters]                    [Search...]            │
├──────────────┬──────────────────────────────────────┤
│ Mechanisms   │  ┌─────────────────────────────────┐ │
│ ☑ sample     │  │ Omnisphere                      │ │
│ ☐ wavetable  │  │ Spectrasonics • Synth • Cinematic│ │
│ ☐ granular   │  ├─────────────────────────────────┤ │
│              │  │ Kontakt                         │ │
│ Genres       │  │ Native Instruments • Sampler    │ │
│ ☑ cinematic  │  └─────────────────────────────────┘ │
│ ☐ ambient    │                                      │
└──────────────┴──────────────────────────────────────┘
```

**Плюсы:** Практичен, понятен, быстр
**Минусы:** Не выражает многомерность

#### 2. Semantic Space (3D/4D)

```
        Genre (ось Y)
            │
            │    ● Plugin
            │   /
            │  /
            │ /
────────────┼────────── Mechanism (ось X)
           /│
          / │
         /  │
        /   │
    Mood (ось Z)
```

**Плюсы:** Честная метафора многомерности
**Минусы:** Сложно навигировать

#### 3. Constellation (созвездия)

- Плагин — звезда
- Жанр — цвет свечения
- Механизм — форма
- Связи проявляются при hover

**Плюсы:** Эмоционально, красиво
**Минусы:** Требует обучения

#### 4. Morph View (трансформация)

```
Matrix ←→ Graph ←→ Space ←→ Constellation
```

- Один датасет, разные проекции
- Переключение режимов
- Пользователь видит, что структура одна

**Плюсы:** Демонстрирует идею USG
**Минусы:** Сложно реализовать

### Текущее решение

**Первая задача:** "Найти инструмент для cinematic + dark + texture"

**Выбранная проекция:** Faceted Explorer (прагматичный)

**Почему:**
- Это самая частая задача пользователя
- Не требует обучения
- Быстро реализуется
- Даёт практическую пользу сразу

**Следующие режимы (после Explorer):**
1. Compare View — сравнение 2-3 плагинов
2. Ego Graph — связи одного плагина
3. Morph Mode — демонстрация философии (последний)

---

## Унифицированные виджеты

### Флаги стран

```javascript
// Работает с любым графом, где есть country
const CountryFilter = {
  id: 'country-filter',
  position: 'panel-filters',
  applies_to: ['VSTablishment', 'MusicGeneral'],
  data_source: 'countries.json'
};
```

### Поиск

```javascript
const SearchWidget = {
  id: 'search',
  position: 'panel-header',
  applies_to: '*', // все графы
  search_fields: ['name', 'definition', 'tags']
};
```

### Info Card

```javascript
const InfoCard = {
  id: 'info-card',
  position: 'panel-story',
  applies_to: '*',
  shows: ['name', 'type', 'definition', 'relations']
};
```

---

## Стеки визуализации

### Доступные стеки

| Стек | Назначение | Производительность |
|------|------------|-------------------|
| **Three.js + 3d-force-graph** | 3D графы, навигация | Средняя |
| **force-graph (2D)** | 2D графы | Высокая |
| **D3.js** | Матрицы, Sankey, Treemap | Высокая |
| **React Three Fiber** | Интерактивные 3D сцены | Средняя |
| **Vega/Vega-Lite** | Декларативные визуализации | Высокая |
| **Cytoscape.js** | Сетевые графы | Высокая |

### Принцип выбора

1. **Навигация** → 3D force-graph
2. **Фильтрация** → Faceted UI (React)
3. **Сравнение** → Matrix/Parallel Coordinates (D3)
4. **Поток** → Sankey (D3)
5. **Иерархия** → Treemap/Sunburst (D3)

---

## Открытые вопросы

1. **Как переключать стеки на сцене?**
   - Мгновенно или с анимацией?
   - Сохранять состояние предыдущего?

2. **Где граница между сценой и панелями?**
   - Панели всегда поверх?
   - Могут ли панели влиять на сцену?

3. **Как унифицировать данные для разных стеков?**
   - Общий формат или адаптеры?

---

## Идеи для развития

### Когнитивная среда

- Перетаскивание измерений на сцену
- Добавление осей
- Схлопывание связей
- "Раскрытие" термина как подпространства
- Морфинг из матрицы в созвездие

### Театральные механики

- Анимированные переходы между режимами
- Звуковое сопровождение навигации
- Эмбиент-подсветка по настроению графа

---

## Changelog

| Дата | Изменение |
|------|-----------|
| 2026-02-19 | Создан документ. Зафиксирован Universe как навигационная модель. |
| 2026-02-19 | Добавлено понятие "Режим когнитивной задачи". Выбрана первая задача для VSTablishment: Faceted Explorer. |
