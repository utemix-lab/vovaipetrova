# Universe Roadmap

> Единый документ целей и этапов развития системы.
> Обновляется по мере продвижения.

---

## Философия

**Код — следствие онтологии, не наоборот.**

Система строится так, чтобы:
1. Формальная модель определяла структуру кода
2. Агент выступал архитектором, а не исполнителем
3. Внешняя информация упаковывалась в персональные структуры системы

---

## Глобальные цели

### Universe (активная разработка)
Пространство агентно-пользовательского взаимодействия:
- **Онтология с интерфейсом** — граф как единый источник истины
- **Нелинейное мышление** — эффект, достигаемый через навигацию
- **Архитектура** — условие, обеспечивающее масштабируемость

### Cryptocosm (вектор, отложен)
Рефлексивная машина — будущий слой самонаблюдения системы.

---

## Текущий этап: Формальная модель ядра

**Цель:** Создать Digital Twin онтологии — машиночитаемый чертёж системы.

### Задачи этапа

1. **Схема онтологии** (`ontology/schema/`)
   - Базовые типы: Node, Edge, NodeType
   - Сущности: Character, Domain, Workbench, Collab
   - Инструменты: Practice, Mode, Filter (будущие)
   - Связи: contains, relates, structural

2. **Архитектурные правила** (`ontology/rules/`)
   - Декларативные правила: "узел → виджет"
   - Ограничения: "domain не может быть root"
   - Валидация данных при загрузке

3. **Типизированный registry** (`ontology/registry/`)
   - Обёртка над universe.json
   - Статическая типизация
   - Подготовка к JSON-LD / OWL экспорту

4. **Каталоги не-сущностей**
   - Структура для Query Mode и подобных механик
   - Pointer-теги и внутренняя навигация
   - Упаковка внешней информации в персональные структуры

### Критерии готовности

- [ ] TypeScript-схема онтологии
- [ ] Валидация universe.json при загрузке
- [ ] Архитектурные правила как код
- [ ] Документация модели

---

## Пройденные этапы

### Этап 0: Базовый граф (до React)
- Three.js визуализация
- Императивное управление DOM
- Монолитный visitor.js

### Этап 1: React-интеграция
- React-обёртка графа
- Абстракция ThreeGraphEngine
- Декларативный UI-слой
- Framer Motion анимации
- Query Mode

### Этап 2: Унификация типов (февраль 2026)
- Разделение онтологии и инструментов
- 1 тип узла = 1 шаблон страницы
- Унификация подсветки виджетов
- Папка author/ для оператора
- Средний масштаб камеры при старте

---

## Архитектурные принципы

1. **Онтология первична** — код следует из модели
2. **Типизация везде** — TypeScript как контракт
3. **Декларативность** — правила, не императивы
4. **Расширяемость** — новые категории без переписывания ядра
5. **Персонализация** — внешнее → внутреннее, не наоборот

---

## Связанные документы

- `author/ontology-map.md` — человекочитаемая карта графа
- `docs/ARCHITECTURE_PRINCIPLES.md` — архитектурные принципы
- `docs/CHANGELOG.md` — история изменений
- `docs/archive/` — завершённые планы
