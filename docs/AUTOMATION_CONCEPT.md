# TRACK 5 — Automation / Agency

**Дата:** 15 февраля 2026  
**Статус:** Концептуализация

> **Вопрос Track 5:** Как система добывает и обрабатывает информацию из Внешнего мира?

---

## Контекст

Платформа не только отображает данные, но и **активно добывает** их из внешних источников. Это делает LLM-агент, работающий в связке с персонажем-куратором.

**Ключевая инновация:** Видеообзор (YouTube) + База Знаний с навигацией и структурой. Посетитель переходит с видео на сайт и видит не просто статью, а полноценную выдачу со связями.

---

## Архитектура агентности

```
ВНЕШНИЙ МИР                          МИР ВОВЫ И ПЕТРОВЫ
─────────────                        ───────────────────

┌─────────────┐                      ┌─────────────────────────────┐
│ KVR Audio   │                      │                             │
│ Plugin      │ ──── LLM-агент ────▶ │  КАТАЛОГИ                   │
│ Boutique    │      (Скаут)         │  • vst-plugins.json         │
│ Официальные │                      │  • companies.json           │
│ сайты       │                      │  • news-feed.json           │
└─────────────┘                      │                             │
                                     ├─────────────────────────────┤
                                     │                             │
                                     │  ЛЕНТА НОВОСТЕЙ             │
                                     │  (автоматический поток)     │
                                     │                             │
                                     ├─────────────────────────────┤
                                     │                             │
                                     │  ДАЙДЖЕСТЫ                  │
                                     │  (ручная видеопродукция)    │
                                     │                             │
                                     └─────────────────────────────┘
                                                   │
                                                   ▼
                                     ┌─────────────────────────────┐
                                     │  ВЫДАЧА (VSTablishment)     │
                                     │  • Страница инструмента     │
                                     │  • Связи: страна, компания  │
                                     │  • Обзоры, дайджесты        │
                                     │  • Навигация по каталогам   │
                                     └─────────────────────────────┘
```

---

## Единая LLM с режимами

Используется **одна LLM** с разными промптами/режимами:

| Режим | Назначение | Триггер | Автоматизация |
|-------|------------|---------|---------------|
| **СКАУТ** | Парсинг источников, предложение записей | Cron / Кнопка / Пакет | Полная |
| **КУРАТОР** | Формирование обзоров, отбор в дайджест | Кнопка | Полу |
| **АРХИТЕКТОР** | Обсуждение структуры системы | Диалог | Ручной |
| **НАРРАТИВ** | Тексты для персонажей | Диалог | Ручной |
| **РЕФЛЕКСИЯ** | Объяснение системы посетителям | Запрос | Авто |

### Промпт хранится в системе

LLM работает по заранее заданному промпту, без ручного пересказа задачи:

```javascript
// Пример вызова — промпт берётся из конфига
const agent = new LLMAgent(world, {
  mode: "scout",
  character: "vova",
  sources: ["kvr", "plugin-boutique"]
});

await agent.scan(); // → предложения в pending
```

### Режимы независимы

Вы можете:
1. Натриггерить Скаута на неделю (пакетный режим)
2. Переключиться на Архитектора (обсудить структуру)
3. Переключиться на Нарратив (написать текст для Вовы)

Это разные сессии, не мешают друг другу.

---

## Триггеры Скаута

### Режимы запуска

| Режим | Описание | Когда использовать |
|-------|----------|-------------------|
| **Автоматический** | Cron (06:00 UTC) | Ежедневно, без участия |
| **Ручной** | Кнопка "Запустить Скаута" | Когда есть время проверить |
| **Пакетный** | "Сканировать за N дней" | Заготовка на неделю |

### Один триггер → 12 запросов

```
ТРИГГЕР: "Запустить Скаута"
              │
              ▼
┌─────────────────────────────────────────────────────────────────────┐
│  Скаут читает конфиг:                                               │
│  • 12 персонажей (активных)                                         │
│  • Каждый → свои источники                                          │
│  • Каждый → свой промпт (из шаблона)                                │
└─────────────────────────────────────────────────────────────────────┘
              │
              ▼
Параллельно:
• Вова (VST) → kvr, plugin-boutique → 1 запись
• Петрова (AI) → huggingface, arxiv → 1 запись
• ... × 12
              │
              ▼
pending-entries.json: +12 записей
pending-tags.json: +N терминов
pending-sources.json: +M источников (если найдены)
```

### Пакетный режим

```
"Сканировать за 7 дней"
              │
              ▼
12 персонажей × 7 дней = 84 запроса
              │
              ▼
pending-entries: +84 записей
              │
              ▼
Утверждаете порциями, когда есть время
```

---

## Очереди в Мастерской

```
┌─────────────────────────────────────────────────────────────────────┐
│  МАСТЕРСКАЯ — Очереди                                               │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  [На утверждение]              [На публикацию]                      │
│  ─────────────────             ────────────────                     │
│                                                                     │
│  pending-entries: 84           approved-entries: 12                 │
│  pending-tags: 23              scheduled-posts: 7                   │
│  pending-sources: 2                                                 │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

### Жизненный цикл записи

```
LLM предлагает → pending → [Вы утверждаете] → approved → [публикация] → каталог
                              │
                              └─ [Вы отклоняете] → rejected (архив)
```

### Гибкость работы

- **Нет времени:** pending накапливается, система ждёт
- **Есть 30 минут:** утверждаете порцию
- **Есть 2 часа:** утверждаете всё + работаете в другом режиме LLM

---

## Источники

### Каталог источников

```json
// worlds/vovaipetrova/agency/sources.json
{
  "id": "sources",
  "entries": [
    {
      "id": "kvr",
      "name": "KVR Audio",
      "url": "https://www.kvraudio.com",
      "type": "catalog",
      "domain": "music",
      "workbenches": ["vstablishment"],
      "trust": "high",
      "schedule": "daily",
      "status": "active"
    }
  ]
}
```

### Поля источника

| Поле | Описание |
|------|----------|
| `type` | catalog, store, blog, official, aggregator |
| `trust` | high, medium, low — приоритет |
| `schedule` | daily, weekly, manual |
| `status` | active, paused, deprecated |

### Поиск новых источников

LLM может найти ссылку на неизвестный источник в процессе сканирования:

```
LLM: "В обзоре упоминается bedroomproducersblog.com"
              │
              ▼
Проверка: есть в sources.json? → Нет
              │
              ▼
→ pending-sources.json
              │
              ▼
Вы утверждаете [+] → sources.json (активен)
```

---

## Потоки данных

### 1. Автоматический поток (Лента)

```
Источники → Скаут → Лента новостей → Сайт
                         ↓
                   (настроенный фильтр)
```

- Работает постоянно
- Отображается на сайте в реальном времени
- Фильтруется по категориям, производителям

### 2. Полуавтоматический поток (Посты)

```
Скаут → Рекомендации → [Ваше утверждение] → Соцсети
```

- Агент предлагает посты
- Вы утверждаете и публикуете вручную
- Возможна автоматизация в будущем

### 3. Ручной поток (Видеодайджест)

```
Топ-новости недели → [Ваша режиссура] → YouTube → Ссылка на сайт
                                                        ↓
                                              Выдача с навигацией
```

- Агент готовит выборку топ-новостей
- Вы создаёте видео вручную
- Зритель переходит на сайт и видит структурированную выдачу

---

## Зоны Воркбенча (VSTablishment)

```
┌─────────────────────────────────────────────────────────────────────┐
│  VSTablishment — Воркбенч Вовы                                      │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  [ВИТРИНА]           [МАСТЕРСКАЯ]          [РАЗВЕДКА]               │
│  ──────────          ─────────────         ──────────               │
│  Публичная           Админ-зона            Публичная                │
│                                                                     │
│  • Каталоги          • Черновики           • Лог агента             │
│  • Обзоры            • Очередь постов      • Источники              │
│  • Дайджесты         • Pending записи      • Статистика             │
│  • Коллекции         • Редактирование      • "Скаут нашёл..."       │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

### Витрина (публичная)
- Готовые каталоги VST-инструментов
- Опубликованные обзоры
- Архив видеодайджестов
- Кураторские коллекции Вовы

### Мастерская (админ)
- Черновики обзоров
- Очередь постов на утверждение
- Pending записи от агента
- Инструменты редактирования

### Разведка (публичная — демонстрация процесса)
- Лог действий агента: "Скаут нашёл 12 новинок на KVR"
- Список источников и их статус
- Статистика: добавлено за неделю, отклонено
- Очередь предложений (без возможности редактирования)

---

## Принцип Мира Вовы и Петровы

> **Показывать механики работы самой системы**

Посетитель видит не только **результат** (каталог VST), но и **процесс**:
- Откуда берутся данные (источники)
- Как агент их обрабатывает (лог)
- Что ждёт модерации (pending)
- Статистика работы системы

Это делает платформу **прозрачной** и **образовательной**.

---

## Ежедневный цикл автоматизации

### Что предлагает LLM

| Тип | Описание | Куда |
|-----|----------|------|
| **Единица знания** | Новый плагин, компания, инструмент | vst-plugins.json, companies.json, etc. |
| **Термин** | Слово в тексте обзора, не найденное в каталогах | tags.json |
| **Связи** | Категории, теги, related для новой записи | Поля записи |

### Объём работы

```
12 персонажей × 1 единица знания/день = 12 записей
                                      + N терминов (из текстов)
                                      + связи для каждой записи

Время на утверждение: ≤30 минут/день
```

### Процесс утверждения

```
┌─────────────────────────────────────────────────────────────────────┐
│  Мастерская → Pending                                               │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  ЗАПИСИ (единицы знания):           ТЕГИ (термины):                 │
│  ─────────────────────────          ───────────────                 │
│  • Serum 2.0 [+] [-] [✎]            • sidechain [+] [-]             │
│    company: xfer                    • ducking [+] [-]               │
│    categories: [synth, wavetable]   • ...                           │
│    tags: [vst3, standalone]                                         │
│                                                                     │
│  • Vital 2.1 [+] [-] [✎]                                            │
│  • ...                                                              │
│                                                                     │
│  [+] утвердить → каталог                                            │
│  [-] отклонить                                                      │
│  [✎] редактировать связи                                            │
└─────────────────────────────────────────────────────────────────────┘
```

### Извлечение терминов из текста

```
Текст обзора: "Serum 2.0 использует wavetable синтез с sidechain..."

ШАГ 1: Автоматический матчинг
─────────────────────────────
Парсер ищет в тексте совпадения с каталогами:
• vst-categories.json → "wavetable" найден → кликабелен
• tags.json → "sidechain" не найден

ШАГ 2: LLM-анализ
─────────────────
LLM предлагает: "sidechain — важный термин, добавить в tags.json?"
→ pending-tags

ШАГ 3: Ваше утверждение
───────────────────────
[+] → sidechain добавлен в tags.json
[-] → отклонён, остаётся обычным текстом
```

### Принцип

```
LLM предлагает — Вы решаете.
Ничего не добавляется в каталоги автоматически.
```

---

## Структура данных

### Конфигурация агента

```json
// worlds/vovaipetrova/agency/vst-scout.json
{
  "id": "vst-scout",
  "workbench": "vstablishment",
  "curator": "vova",
  "llm": {
    "model": "gpt-4",
    "modes": ["scout", "curator", "reflection"]
  },
  "sources": [
    { "id": "kvr", "url": "https://www.kvraudio.com", "type": "catalog", "schedule": "daily" },
    { "id": "plugin-boutique", "url": "https://www.pluginboutique.com", "type": "store", "schedule": "daily" }
  ],
  "outputs": {
    "feed": "news-feed.json",
    "catalog": "vst-plugins.json",
    "pending": "pending-entries.json"
  }
}
```

### Лента новостей

```json
// worlds/vovaipetrova/feeds/vst-news.json
{
  "id": "vst-news",
  "workbench": "vstablishment",
  "entries": [
    {
      "id": "vital-2.0-release",
      "title": "Vital 2.0 Released",
      "source": "kvr",
      "date": "2026-02-15",
      "status": "published",
      "plugin": "vital-2.0",
      "tags": ["release", "synth", "free"]
    }
  ]
}
```

### Дайджесты

```json
// worlds/vovaipetrova/digests/2026-w07.json
{
  "id": "2026-w07",
  "title": "VST Дайджест — Неделя 7",
  "date": "2026-02-16",
  "youtube": "https://youtube.com/watch?v=...",
  "items": [
    { "plugin": "vital-2.0", "highlight": true },
    { "plugin": "serum-2.0", "highlight": false }
  ],
  "stats": {
    "new_plugins": 12,
    "new_companies": 2,
    "sources_scanned": 5
  }
}
```

---

## Путь пользователя

```
YouTube                    Сайт (VSTablishment)
────────                   ────────────────────

┌─────────────┐            ┌─────────────────────────────┐
│ Видеодайджест│            │  Страница дайджеста         │
│ "VST Week 7" │ ─ ссылка ─▶│  • Список упомянутых VST    │
│             │            │  • Ссылки на страницы       │
└─────────────┘            └─────────────────────────────┘
                                       │
                                       ▼ клик на VST
                           ┌─────────────────────────────┐
                           │  Страница инструмента       │
                           │  • Описание                 │
                           │  • Производитель → страница │
                           │  • Страна → флаг, регион    │
                           │  • Категории → фильтры      │
                           │  • Похожие инструменты      │
                           │  • Обзоры, дайджесты        │
                           └─────────────────────────────┘
                                       │
                                       ▼ навигация
                           ┌─────────────────────────────┐
                           │  Каталог по категории       │
                           │  Каталог по производителю   │
                           │  Каталог по стране          │
                           │  Лента новостей             │
                           │  Разведка (лог агента)      │
                           └─────────────────────────────┘
```

---

## Статус реализации

| Компонент | Статус |
|-----------|--------|
| Каталоги (vst-plugins, companies, countries) | ✓ Шаблоны созданы |
| LLM-агент (Скаут) | Концепция |
| Лента новостей | Концепция |
| Дайджесты | Концепция |
| UI Воркбенча | Концепция |
| Интеграция YouTube → Сайт | Концепция |

---

## Связанные документы

| Документ | Описание |
|----------|----------|
| `ARCHITECTURE_TRACKS.md` | Общая архитектура треков |
| `TERMINOLOGY_CONCEPT.md` | Концепция терминов и тегов |
| `OPERATORS_CONCEPT.md` | Track 3 — Эпистемические операторы |
| `../engine/docs/OPERATORS_API.md` | API операторов |
| `../worlds/vovaipetrova/catalogs/` | Каталоги мира |
| `../worlds/vovaipetrova/catalogs/tags.json` | Каталог тегов/терминов |
